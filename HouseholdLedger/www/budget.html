<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Financial Hero - Budget</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
  />
  <link rel="stylesheet" href="style.css" />
</head>
<body class="bg-light">
  <header class="py-4 mb-4 shadow-sm bg-white">
    <div class="container d-flex flex-wrap align-items-center justify-content-between gap-3">
      <div class="d-flex align-items-center gap-3">
        <div class="logo-circle text-white"><i class="fa-solid fa-coins"></i></div>
        <div>
          <h1 class="h3 mb-0">Financial Hero</h1>
          <p class="text-muted mb-0">Budget Dashboard</p>
        </div>
      </div>
      <nav class="nav nav-pills">
        <a class="nav-link" href="index.html">대시보드</a>
        <a class="nav-link active" href="budget.html">예산</a>
        <a class="nav-link" href="schedules.html">고정 내역</a>
      </nav>
    </div>
  </header>

  <main class="container pb-5">
    <section class="card mb-4 shadow-sm">
      <div class="card-body d-flex flex-wrap justify-content-between align-items-center gap-3">
        <div>
          <h4 class="mb-1">예산 요약</h4>
          <p class="text-muted mb-0">연간 목표와 월별 예산을 한눈에 확인하세요.</p>
        </div>
        <div class="d-flex align-items-center gap-2">
          <select class="form-select" id="budget-year" style="width: 120px;"></select>
          <button class="btn btn-primary" id="edit-budget-btn">
            <i class="fa-solid fa-pen-to-square me-2"></i>예산 수정
          </button>
        </div>
      </div>
    </section>

    <section class="row g-3 mb-4">
      <div class="col-md-4">
        <div class="card summary-card h-100">
          <div class="card-body">
            <h6 class="text-muted">연간 저축 목표</h6>
            <h3 id="annual-savings-goal">0</h3>
            <p class="text-muted mb-0">달성률: <span id="annual-savings-rate">0%</span></p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card summary-card h-100">
          <div class="card-body">
            <h6 class="text-muted">연간 지출 한도</h6>
            <h3 id="annual-expense-limit">0</h3>
            <p class="text-muted mb-0">현재 지출: <span id="annual-expense-current">0</span></p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card summary-card h-100">
          <div class="card-body">
            <h6 class="text-muted">이번 달 예산</h6>
            <h3 id="current-month-budget">0</h3>
            <p class="text-muted mb-0">현재 지출: <span id="current-month-expense">0</span></p>
          </div>
        </div>
      </div>
    </section>

    <section class="row g-4 mb-4">
      <div class="col-lg-7">
        <div class="chart-card h-100">
          <h6 class="text-muted mb-3">월별 예산 vs 실제 지출</h6>
          <canvas id="budgetComboChart" height="220"></canvas>
        </div>
      </div>
      <div class="col-lg-5">
        <div class="chart-card h-100">
          <h6 class="text-muted mb-3">연간 저축 목표 달성률</h6>
          <canvas id="savingsGaugeChart" height="220"></canvas>
          <p class="text-muted small mt-2 mb-0" id="savings-gauge-label"></p>
        </div>
      </div>
    </section>
  </main>

  <div class="modal fade" id="budgetEditModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">예산 수정</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="row g-3 mb-4">
            <div class="col-md-6">
              <label class="form-label" for="edit-annual-savings">연간 저축 목표</label>
              <input class="form-control" type="number" id="edit-annual-savings" min="0" />
            </div>
            <div class="col-md-6">
              <label class="form-label" for="edit-annual-expense">연간 지출 한도</label>
              <input class="form-control" type="number" id="edit-annual-expense" min="0" />
            </div>
          </div>

          <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3">
            <div class="d-flex align-items-center gap-2">
              <label class="form-label mb-0" for="edit-month-select">월 선택</label>
              <select class="form-select" id="edit-month-select" style="width: 120px;"></select>
            </div>
            <button class="btn btn-outline-secondary btn-sm" id="copy-prev-month">이전 달 복사</button>
          </div>

          <div class="mb-3">
            <label class="form-label" for="edit-monthly-savings">월간 저축 목표</label>
            <input class="form-control" type="number" id="edit-monthly-savings" min="0" />
          </div>

          <div class="table-responsive">
            <table class="table table-sm align-middle">
              <thead>
                <tr>
                  <th>카테고리</th>
                  <th class="text-end">예산</th>
                </tr>
              </thead>
              <tbody id="edit-budget-rows"></tbody>
            </table>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
          <button type="button" class="btn btn-primary" id="save-budget-btn">저장</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="budget.js"></script>
</body>
</html>
